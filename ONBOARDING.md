# Hybrid RAG System Onboarding Guide

Welcome to the Hybrid RAG System project! This guide is designed to help you understand the codebase, set up your environment, and start contributing.

## 1. System Overview

This project implements a **Hybrid Retrieval Augmented Generation (RAG)** system that combines two retrieval approaches:
1.  **Vector RAG**: Uses semantic similarity (embeddings) to find relevant text chunks. Good for finding specific facts and similar contexts.
2.  **Graph RAG**: Uses a knowledge graph to find related entities and relationships. Good for understanding structure and multi-hop reasoning.

The system uses **Google Gemini** (via `langchain-google-genai`) for:
-   Generating embeddings (Vector RAG)
-   Extracting entities and relationships (Graph RAG)
-   Generating final answers (Synthesis)

## 2. Architecture & Key Components

The codebase is organized into modular components:

### Core Logic (`ragc_core/`)
-   **`hybrid_rag.py`**: The main entry point. It orchestrates both Vector and Graph RAGs and merges their results.
-   **`vector_rag.py`**: Handles ChromaDB operations for vector storage and retrieval.
-   **`graph_rag.py`**: Handles NetworkX graph operations for entity/relationship storage and retrieval.
-   **`config.py`**: Central configuration using Pydantic models.
-   **`document_processor.py`**: Handles document loading and chunking.

### Representative Agent (`api/` & `run_representative_agent.py`)
-   **`api/main.py`**: A FastAPI application that exposes the RAG system as a REST API.
-   **`run_representative_agent.py`**: Launcher script for the API server.

### Evaluation (`evaluation/`)
-   **`metrics.py`**: Standard RAG metrics (Precision, Recall, etc.).
-   **`ragas_evaluator.py`**: Advanced evaluation using RAGAS (Faithfulness, Answer Relevancy).
-   **`communication_evaluator.py`**: Evaluates how well the agent transfers knowledge to others (Teacher-Student loop).

### User Interface (`ui/`)
-   **`evaluation_ui.py`**: A Streamlit dashboard for interacting with the system and running evaluations.

## 3. Setup & Running

### Prerequisites
-   Python 3.11+
-   Google Gemini API Key

### Installation
1.  **Clone the repository**
2.  **Create a virtual environment**:
    ```bash
    python -m venv .venv
    source .venv/bin/activate
    ```
3.  **Install dependencies**:
    ```bash
    pip install -r requirements.txt
    ```
4.  **Environment Variables**:
    Create a `.env` file:
    ```env
    GEMINI_API_KEY=your_api_key_here
    ```

### Running the System
**1. Start the Representative Agent (Backend)**
This runs the FastAPI server.
```bash
python run_representative_agent.py
```

**2. Start the UI (Frontend)**
This opens the Streamlit dashboard.
```bash
streamlit run ui/evaluation_ui.py
```

## 4. Common Issues & Troubleshooting

### `ModuleNotFoundError: No module named 'langchain_google_genai'`
-   **Cause**: The package is not installed in the current environment, or you are running python/streamlit from outside the virtual environment.
-   **Fix**:
    1.  Ensure your virtual environment is activated: `source .venv/bin/activate`
    2.  Verify installation: `pip list | grep langchain-google-genai`
    3.  If missing, reinstall: `pip install langchain-google-genai`

### API Connection Errors
-   Ensure `run_representative_agent.py` is running in a separate terminal window.
-   Check if the port (default 8000) is already in use.

## 5. Future Extensions

Here are ways to extend the system:

### Adding New Data Sources
-   Modify `ragc_core/document_processor.py` to support new file formats (e.g., HTML, Notion export).

### Improving Graph RAG
-   Currently uses simple regex/LLM for extraction.
-   **Extension**: Integrate a proper NLP library like spaCy or a dedicated Graph LLM for better entity extraction.
-   **Extension**: Use a persistent graph database like Neo4j instead of NetworkX (in-memory).

### Enhancing Evaluation
-   Add more metrics to `evaluation/metrics.py`.
-   Create custom test datasets in `data/`.

### Multi-Agent System
-   The `CommunicationEvaluator` is a stepping stone to a multi-agent system.
-   **Extension**: Create multiple instances of the Representative Agent with different knowledge bases and let them collaborate.

---
*Generated by Antigravity*
