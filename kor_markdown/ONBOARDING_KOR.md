# 하이브리드 RAG 시스템 온보딩 가이드

하이브리드 RAG 시스템 프로젝트에 오신 것을 환영합니다! 이 가이드는 코드베이스를 이해하고, 환경을 설정하며, 기여를 시작하는 데 도움을 주기 위해 작성되었습니다.

## 1. 시스템 개요

이 프로젝트는 두 가지 검색 방식을 결합한 **하이브리드 검색 증강 생성(Hybrid RAG)** 시스템을 구현합니다:
1.  **벡터 RAG (Vector RAG)**: 의미론적 유사성(임베딩)을 사용하여 관련 텍스트 청크를 찾습니다. 구체적인 사실이나 유사한 문맥을 찾는 데 유용합니다.
2.  **그래프 RAG (Graph RAG)**: 지식 그래프를 사용하여 관련 개체(Entity)와 관계(Relationship)를 찾습니다. 구조를 이해하고 다단계 추론(Multi-hop reasoning)을 하는 데 유용합니다.

이 시스템은 **Google Gemini** (via `langchain-google-genai`)를 사용하여 다음을 수행합니다:
-   임베딩 생성 (Vector RAG)
-   개체 및 관계 추출 (Graph RAG)
-   최종 답변 생성 (Synthesis)

## 2. 아키텍처 및 주요 컴포넌트

코드베이스는 모듈식 컴포넌트로 구성되어 있습니다:

### 핵심 로직 (`ragc_core/`)
-   **`hybrid_rag.py`**: 메인 진입점입니다. 벡터 및 그래프 RAG를 조율하고 결과를 병합합니다.
-   **`vector_rag.py`**: 벡터 저장 및 검색을 위한 ChromaDB 작업을 처리합니다.
-   **`graph_rag.py`**: 개체/관계 저장 및 검색을 위한 NetworkX 그래프 작업을 처리합니다.
-   **`config.py`**: Pydantic 모델을 사용한 중앙 설정 파일입니다.
-   **`document_processor.py`**: 문서 로딩 및 청킹(Chunking)을 처리합니다.

### 대표 에이전트 (`api/` & `run_representative_agent.py`)
-   **`api/main.py`**: RAG 시스템을 REST API로 노출하는 FastAPI 애플리케이션입니다.
-   **`run_representative_agent.py`**: API 서버를 실행하는 런처 스크립트입니다.

### 평가 (`evaluation/`)
-   **`metrics.py`**: 표준 RAG 지표 (Precision, Recall 등)를 정의합니다.
-   **`ragas_evaluator.py`**: RAGAS를 사용한 고급 평가 (신뢰성, 답변 관련성 등)를 수행합니다.
-   **`communication_evaluator.py`**: 에이전트가 지식을 타인에게 얼마나 잘 전달하는지 평가합니다 (교사-학생 루프).

### 사용자 인터페이스 (`ui/`)
-   **`evaluation_ui.py`**: 시스템과 상호 작용하고 평가를 실행하기 위한 Streamlit 대시보드입니다.

## 3. 설정 및 실행

### 필수 조건
-   Python 3.11 이상
-   Google Gemini API 키

### 설치
1.  **저장소 복제 (Clone)**
2.  **가상 환경 생성**:
    ```bash
    python -m venv .venv
    source .venv/bin/activate
    ```
3.  **의존성 설치**:
    ```bash
    pip install -r requirements.txt
    ```
4.  **환경 변수 설정**:
    `.env` 파일을 생성합니다:
    ```env
    GEMINI_API_KEY=your_api_key_here
    ```

### 시스템 실행
**1. 대표 에이전트 시작 (백엔드)**
FastAPI 서버를 실행합니다.
```bash
python run_representative_agent.py
```

**2. UI 시작 (프론트엔드)**
Streamlit 대시보드를 엽니다.
```bash
streamlit run ui/evaluation_ui.py
```

## 4. 일반적인 문제 및 해결 방법

### `ModuleNotFoundError: No module named 'langchain_google_genai'`
-   **원인**: 패키지가 현재 환경에 설치되어 있지 않거나, 가상 환경 밖에서 python/streamlit을 실행하고 있습니다.
-   **해결**:
    1.  가상 환경이 활성화되어 있는지 확인: `source .venv/bin/activate`
    2.  설치 확인: `pip list | grep langchain-google-genai`
    3.  없을 경우 재설치: `pip install langchain-google-genai`

### API 연결 오류
-   `run_representative_agent.py`가 별도의 터미널 창에서 실행 중인지 확인하세요.
-   포트(기본값 8000)가 이미 사용 중인지 확인하세요.

## 5. 향후 확장 계획

시스템을 확장할 수 있는 방법들입니다:

### 새로운 데이터 소스 추가
-   `ragc_core/document_processor.py`를 수정하여 새로운 파일 형식(예: HTML, Notion 내보내기)을 지원합니다.

### 그래프 RAG 개선
-   현재는 추출을 위해 간단한 정규식/LLM을 사용합니다.
-   **확장**: 더 나은 개체 추출을 위해 spaCy 같은 전문 NLP 라이브러리나 전용 그래프 LLM을 통합합니다.
-   **확장**: NetworkX(인메모리) 대신 Neo4j 같은 영구 그래프 데이터베이스를 사용합니다.

### 평가 강화
-   `evaluation/metrics.py`에 더 많은 지표를 추가합니다.
-   `data/`에 커스텀 테스트 데이터셋을 생성합니다.

### 멀티 에이전트 시스템
-   `CommunicationEvaluator`는 멀티 에이전트 시스템으로 가는 디딤돌입니다.
-   **확장**: 서로 다른 지식 베이스를 가진 대표 에이전트 인스턴스를 여러 개 생성하여 협업하게 합니다.

---
*Generated by Antigravity*
